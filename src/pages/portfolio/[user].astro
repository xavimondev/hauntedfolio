---
import Hero from '@/components/Hero.astro'
import UserNotFound from '@/components/UserNotFound.astro'
import Layout from '@/layout.astro'
import { fetchUserData } from '@/services/github'

const { user } = Astro.params

if (!user) {
	Astro.redirect('/404')
	return
}

const userData = await fetchUserData({ username: user })
---

<Layout>
  {!userData && <UserNotFound />}
  {userData && <Hero {...userData} />}
</Layout>